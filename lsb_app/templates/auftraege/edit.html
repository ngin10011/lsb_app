<!-- lsb_app/templates/auftraege/edit.html -->
{% extends "base.html" %}
{% block title %}Auftrag bearbeiten{% endblock %}

{% block body %}
<h1 class="h5 mb-3">
  Auftrag bearbeiten
  <small class="text-muted">(#{{ auftrag.id }})</small>
</h1>

<form method="post">
  {{ form.csrf_token }}
  <div class="row g-3">
    <div class="col-md-3">
      <label class="form-label">{{ form.auftragsnummer.label }}</label>
      {{ form.auftragsnummer(class="form-control") }}
      {% for e in form.auftragsnummer.errors %}<div class="text-danger small">{{ e }}</div>{% endfor %}
    </div>
    <div class="col-md-3">
      <label class="form-label">{{ form.auftragsdatum.label }}</label>
      {{ form.auftragsdatum(class="form-control", placeholder="YYYY-MM-DD") }}
      {% for e in form.auftragsdatum.errors %}<div class="text-danger small">{{ e }}</div>{% endfor %}
    </div>
    <div class="col-md-3">
      <label class="form-label">{{ form.auftragsuhrzeit.label }}</label>
      {{ form.auftragsuhrzeit(class="form-control", placeholder="HH:MM") }}
      {% for e in form.auftragsuhrzeit.errors %}<div class="text-danger small">{{ e }}</div>{% endfor %}
    </div>
    <div class="col-md-3">
      <label class="form-label">{{ form.mehraufwand.label }}</label><br>
      {{ form.mehraufwand(class="form-check-input") }}
      {% for e in form.mehraufwand.errors %}<div class="text-danger small">{{ e }}</div>{% endfor %}
    </div>

    <div class="col-md-4">
      <label class="form-label">{{ form.kostenstelle.label }}</label>
      {{ form.kostenstelle(class="form-select") }}
      {% for e in form.kostenstelle.errors %}<div class="text-danger small">{{ e }}</div>{% endfor %}
    </div>
    <div class="col-md-4">
      <label class="form-label">{{ form.status.label }}</label>
      {{ form.status(class="form-select") }}
      {% for e in form.status.errors %}<div class="text-danger small">{{ e }}</div>{% endfor %}
    </div>
    <div class="col-12">
      <label class="form-label">{{ form.bemerkung.label }}</label>
      {{ form.bemerkung(class="form-control", rows="3") }}
      {% for e in form.bemerkung.errors %}<div class="text-danger small">{{ e }}</div>{% endfor %}
    </div>
  </div>

  <div class="mt-4 d-flex gap-2">
    <a href="{{ request.args.get('next') or url_for('patients.detail', pid=auftrag.patient_id) }}" class="btn btn-outline-secondary">
      Abbrechen
    </a>
    {{ form.submit(class="btn btn-primary") }}
  </div>
</form>
{% endblock %}
