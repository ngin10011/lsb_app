<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Rechnung</title>
    <style>
        @page {
            margin-top: 1.5cm;
            margin-bottom: 3cm;
            margin-left: 2.5cm;
            margin-right: 2cm;

            @bottom-center {
                content: element(seitenfooter);
            }
        }
        body {
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
            font-size: 11pt;
            color: #000;
            margin: 0;
        }
        header {
            /* padding: 2cm 1.5cm 0 1.5cm; */
            text-align: center;
        }
        .logo {
            font-size: 16pt;
            font-weight: bold;
        }
        .anschrift-kopfzeile {
            font-size: 8pt;
            text-decoration: underline;
            margin-bottom: 0.3cm;
        }
        .anschrift-block {
            position: absolute;
            top: 3cm; /* inkl. 1.5cm margin-top somit 4.5cm */
            left: 0cm; /* inkl. 2.5cm margin-left somit 2.5cm */
            width: 9cm;
            height: 4cm;
            line-height: 1.3em;
        }
        .bankdaten-block {
            position: absolute;
            top: 5.5cm;
            right: 0cm;
            width: 8cm;
            line-height: 1.3em;
            font-size: 10pt;
            text-align: left;
        }
        .content {
            margin-top: 6cm;
            padding-right: 0.5cm;
            /* padding: 0 1.5cm 2cm 1.5cm; */
        }
        .title {
            text-align: center;
            font-size: 18pt;
            font-weight: bold;
            margin-bottom: 1cm;
        }
        .meta {
            margin-top: 1cm;
        }
        .footer {
            margin-bottom: 0cm;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1cm;
            page-break-inside: avoid;
        }
        th, td {
            border-bottom: 1px solid #ccc;
            padding: 4px;
        }
        th {
            background-color: #f0f0f0;
            text-align: left;
        }
        .right {
            text-align: right;
        }
        .total {
            font-weight: bold;
            border-top: 2px solid #000;
        }
        .seitenfooter {
            position: running(seitenfooter);
            font-size: 12pt;
            text-align: center;
            color: #666;
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">{{ vm.config.COMPANY_NAME }}</div>
        <div>{{ vm.config.COMPANY_ROLE }}<br>{{ vm.config.COMPANY_ADDRESS }}<br>Tel: {{ vm.config.COMPANY_PHONE }} - {{ vm.config.COMPANY_EMAIL }}</div>
    </header>

    <div class="anschrift-block">
        <div class="anschrift-kopfzeile">
            {{ vm.config.COMPANY_NAME }} - {{ vm.config.COMPANY_ADDRESS }}
        </div>
        {{ vm.anschrift_html|safe }}
    </div>

    <div class="bankdaten-block">
        <p><strong>Bankverbindung:</strong><br>
        IBAN: {{ vm.config.BANK_IBAN }}<br>
        BIC: {{ vm.config.BANK_BIC }}<br>
        Verwendungszweck: {{ vm.verwendungszweck }}</p>
    </div>

    <div class="content">
        <div class="title">{{ vm.rechnungsart }}</div>

        <section class="meta">
            <p><strong>Rechnungsnummer:</strong> {{ vm.rechnungsnummer_str }}<br>
            <strong>Rechnungsdatum:</strong> {{ vm.rechnungsdatum.strftime("%d.%m.%Y") }}<br>
            <strong>Leichenschau am:</strong> {{ vm.auftragsdatum.strftime("%d.%m.%Y")}}<br><br>
            <strong>{{ vm.verstorbener_gegendert }}:</strong> {{ vm.patient_name_komplett }} (*{{ vm.patient_geburtsdatum }})</p>
        </section>

        <table>
            <thead>
                <tr>
                    <th>Leistung</th>
                    <th>Beschreibung</th>
                    <th class="right">Betrag (€)</th>
                </tr>
            </thead>
            <tbody>
                {% for eintrag in vm.leistungen %}
                <tr>
                    <td>{{ eintrag.kurz }}</td>
                    <td>{{ eintrag.beschreibung }}</td>
                    <td class="right">{{ eintrag.betrag }}</td>
                </tr>
                {% endfor %}
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="2" class="right">Summe</td>
                    <td class="right total">{{ vm.summe_str }}</td>
                </tr>
            </tfoot>
        </table>

        <section class="footer">
            <p>Gemäß § 12, 1 GOÄ ist die Rechnung sofort fällig. Spätestens 30 Tage nach Zugang tritt gemäß § 286 III BGB Verzug ein.</p>
        </section>
    </div>

    <section class="seitenfooter">
        <p>Steuernummer: {{ vm.config.TAX_NUMBER }}</p>
    </section>

</body>
</html>